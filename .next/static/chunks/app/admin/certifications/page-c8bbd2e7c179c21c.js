(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{7018:(e,t,r)=>{Promise.resolve().then(r.bind(r,3851))},3851:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var s=r(5155),a=r(2115),i=r(1086),n=r(3312),o=r(6217),l=r(767),d=r(1567);let c=o.bL,m=o.l9,u=o.ZL;o.bm;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(o.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a})});f.displayName=o.hJ.displayName;let x=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,s.jsxs)(u,{children:[(0,s.jsx)(f,{}),(0,s.jsxs)(o.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i,children:[a,(0,s.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=o.UC.displayName;let p=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};p.displayName="DialogHeader";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(o.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",r),...a})});g.displayName=o.hE.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(o.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",r),...a})}).displayName=o.VY.displayName;var h=r(2317),j=r(9606),y=r(8986);let b=j.Op,v=a.createContext({}),N=e=>{let{...t}=e;return(0,s.jsx)(v.Provider,{value:{name:t.name},children:(0,s.jsx)(j.xI,{...t})})},w=()=>{let e=a.useContext(v),t=a.useContext(I),{getFieldState:r,formState:s}=(0,j.xW)(),i=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...i}},I=a.createContext({}),C=a.forwardRef((e,t)=>{let{className:r,...i}=e,n=a.useId();return(0,s.jsx)(I.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",r),...i})})});C.displayName="FormItem";let _=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:i,formItemId:n}=w();return(0,s.jsx)(y.Label,{ref:t,className:(0,d.cn)(i&&"text-destructive",r),htmlFor:n,...a})});_.displayName="FormLabel";let k=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:i,formDescriptionId:n,formMessageId:o}=w();return(0,s.jsx)(h.DX,{ref:t,id:i,"aria-describedby":a?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!a,...r})});k.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:i}=w();return(0,s.jsx)("p",{ref:t,id:i,className:(0,d.cn)("text-[0.8rem] text-muted-foreground",r),...a})}).displayName="FormDescription";let R=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e,{error:n,formMessageId:o}=w(),l=n?String(null==n?void 0:n.message):a;return l?(0,s.jsx)("p",{ref:t,id:o,className:(0,d.cn)("text-[0.8rem] font-medium text-destructive",r),...i,children:l}):null});R.displayName="FormMessage";var z=r(3900),F=r(2679),E=r(3415),D=r(5565),S=r(9749);let U=E.Ik({name:E.Yj().min(1,"Name is required"),issuer:E.Yj().min(1,"Issuer is required"),issued_date:E.Yj().min(1,"Issue date is required"),expiry_date:E.Yj().optional().nullable(),image:E.Nl(FileList).optional()});function L(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),l=(0,i.k)(),d=(0,j.mN)({resolver:(0,F.u)(U),defaultValues:{name:"",issuer:"",issued_date:"",expiry_date:"",image:void 0}});async function u(){try{let{data:e,error:r}=await l.from("certifications").select("*").order("issued_date",{ascending:!1}).returns();if(r)throw r;t(e||[])}catch(e){console.error("Error loading certifications:",e)}finally{o(!1)}}async function f(e){console.log("Form values:",e);try{if(o(!0),!e.image||!e.image[0])throw Error("No image file selected");let t=e.image[0];console.log("File details:",{name:t.name,type:t.type,size:t.size});let r=t.name.split(".").pop(),s="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2),".").concat(r);console.log("Uploading file:",s);let{data:a,error:i}=await l.storage.from("certifications").upload(s,t,{cacheControl:"3600",upsert:!1});if(i)throw console.error("Storage upload error:",i),i;console.log("Upload successful:",a);let{data:{publicUrl:n}}=l.storage.from("certifications").getPublicUrl(s);console.log("Public URL:",n);let c={name:e.name,issuer:e.issuer,issued_date:e.issued_date,expiry_date:e.expiry_date||null,image_url:n};console.log("Inserting certification:",c);let{data:m,error:f}=await l.from("certifications").insert([c]).select();if(f)throw console.error("Database insert error:",f),f;console.log("Insert successful:",m),d.reset({name:"",issuer:"",issued_date:"",expiry_date:"",image:void 0}),u()}catch(e){console.error("Error adding certification:",{error:e,message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0})}finally{o(!1)}}async function h(e,t){try{o(!0);let r=t.split("/").pop();r&&await l.storage.from("certifications").remove([r]);let{error:s}=await l.from("certifications").delete().eq("id",e);if(s)throw s;u()}catch(e){console.error("Error deleting certification:",e)}finally{o(!1)}}return((0,a.useEffect)(()=>{u()},[]),r)?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Manage Certifications"}),(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsx)(n.$,{children:"Add Certification"})}),(0,s.jsxs)(x,{children:[(0,s.jsx)(p,{children:(0,s.jsx)(g,{children:"Add New Certification"})}),(0,s.jsx)(b,{...d,children:(0,s.jsxs)("form",{onSubmit:d.handleSubmit(f),className:"space-y-4",children:[(0,s.jsx)(N,{control:d.control,name:"name",render:e=>{let{field:t}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(_,{children:"Name"}),(0,s.jsx)(k,{children:(0,s.jsx)(z.p,{...t})}),(0,s.jsx)(R,{})]})}}),(0,s.jsx)(N,{control:d.control,name:"issuer",render:e=>{let{field:t}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(_,{children:"Issuer"}),(0,s.jsx)(k,{children:(0,s.jsx)(z.p,{...t})}),(0,s.jsx)(R,{})]})}}),(0,s.jsx)(N,{control:d.control,name:"issued_date",render:e=>{let{field:t}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(_,{children:"Issue Date"}),(0,s.jsx)(k,{children:(0,s.jsx)(z.p,{type:"date",...t})}),(0,s.jsx)(R,{})]})}}),(0,s.jsx)(N,{control:d.control,name:"expiry_date",render:e=>{let{field:t}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(_,{children:"Expiry Date (Optional)"}),(0,s.jsx)(k,{children:(0,s.jsx)(z.p,{type:"date",...t})}),(0,s.jsx)(R,{})]})}}),(0,s.jsx)(N,{control:d.control,name:"image",render:e=>{let{field:{onChange:t,value:r,...a}}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(_,{children:"Certificate Image"}),(0,s.jsx)(k,{children:(0,s.jsx)(z.p,{type:"file",accept:"image/*",onChange:e=>{let r=e.target.files;(null==r?void 0:r.length)&&t(r)},...a,value:void 0})}),(0,s.jsx)(R,{})]})}}),(0,s.jsx)(n.$,{type:"submit",className:"w-full",children:"Add Certification"})]})})]})]})]}),(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)(S.Zp,{children:[(0,s.jsx)(S.aR,{className:"space-y-0 pb-2",children:(0,s.jsx)(S.ZB,{className:"text-lg",children:e.name})}),(0,s.jsxs)(S.Wu,{children:[(0,s.jsx)("div",{className:"relative h-40 mb-4",children:(0,s.jsx)(D.default,{src:e.image_url,alt:e.name,fill:!0,className:"object-contain rounded-md"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.issuer}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Issued: ",new Date(e.issued_date).toLocaleDateString()]}),e.expiry_date&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Expires: ",new Date(e.expiry_date).toLocaleDateString()]})]}),(0,s.jsx)(n.$,{variant:"destructive",size:"sm",className:"mt-4 w-full",onClick:()=>h(e.id,e.image_url),children:"Delete"})]})]},e.id))})]})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(5155),a=r(2115),i=r(2317),n=r(1027),o=r(1567);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:d=!1,...c}=e,m=d?i.DX:"button";return(0,s.jsx)(m,{className:(0,o.cn)(l({variant:a,size:n,className:r})),ref:t,...c})});d.displayName="Button"},9749:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o});var s=r(5155),a=r(2115),i=r(1567);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(5155),a=r(2115),i=r(1567);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},8986:(e,t,r)=>{"use strict";r.d(t,{Label:()=>d});var s=r(5155),a=r(2115),i=r(6195),n=r(1027),o=r(1567);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,o.cn)(l(),r),...a})});d.displayName=i.b.displayName},1086:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var s=r(5974);let a=null,i=()=>a||(a=(0,s.UU)("https://jjilijsqunjqmyrzlkhs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpqaWxpanNxdW5qcW15cnpsa2hzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ0OTEzNjYsImV4cCI6MjA1MDA2NzM2Nn0.7Wbc_Ok819Kzb68hHXVS9BrZ7UIeKIzzdcpRp_pIXp8",{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"sb-auth-token",storage:{getItem:e=>window.localStorage.getItem(e),setItem:(e,t)=>{window.localStorage.setItem(e,t)},removeItem:e=>{window.localStorage.removeItem(e)}}}}))},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(3463),a=r(9795);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[736,181,180,565,319,441,517,358],()=>t(7018)),_N_E=e.O()}]);