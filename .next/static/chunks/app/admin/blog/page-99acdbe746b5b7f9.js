(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{9611:(e,t,r)=>{Promise.resolve().then(r.bind(r,9830))},9830:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),a=r(2115),i=r(1086),l=r(9749),n=r(3312),d=r(3900),o=r(6754),c=r(488),u=r(8986);function f(){let[e,t]=(0,a.useState)([]),[r,f]=(0,a.useState)(!0),[p,m]=(0,a.useState)(!1),g=(0,i.k)();async function h(){try{let{data:e,error:r}=await g.from("blog_posts").select("*").order("created_at",{ascending:!1}).returns();if(r)throw r;t(e||[])}catch(e){console.error("Error loading blog posts:",e)}finally{f(!1)}}async function x(e){m(!0);try{!e.slug&&e.title&&(e.slug=b(e.title));let t={...e,published_at:e.published?e.published_at||new Date().toISOString():null},{error:r}=await g.from("blog_posts").upsert(t).select().returns();if(r)throw r;await h()}catch(e){console.error("Error updating post:",e)}finally{m(!1)}}function b(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}async function v(e){if(confirm("Are you sure you want to delete this post?"))try{let{error:t}=await g.from("blog_posts").delete().match({id:e});if(t)throw t;await h()}catch(e){console.error("Error deleting post:",e)}}async function w(e,t){var r;let s=null===(r=e.target.files)||void 0===r?void 0:r[0];if(s)try{let e=s.name.split(".").pop(),r="".concat(Date.now(),".").concat(e),a="blog/".concat(r),{error:i}=await g.storage.from("blog-images").upload(a,s);if(i)throw i;let{data:{publicUrl:l}}=g.storage.from("blog-images").getPublicUrl(a);await x({...t,featured_image:l})}catch(e){console.error("Error uploading image:",e)}}return((0,a.useEffect)(()=>{h()},[]),r)?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Manage Blog"}),(0,s.jsx)(n.$,{onClick:function(){t([{id:Date.now(),title:"",slug:"",excerpt:"",content:"",published:!1,featured:!1,published_at:null},...e])},children:"Add New Post"})]}),(0,s.jsx)("div",{className:"space-y-8",children:e.map(r=>(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(l.ZB,{children:"Blog Post"})}),(0,s.jsxs)(l.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{children:"Title"}),(0,s.jsx)(d.p,{value:r.title,onChange:s=>{let a=[...e],i=a.findIndex(e=>e.id===r.id),l=s.target.value;a[i]={...r,title:l,slug:b(l)},t(a)},placeholder:"Post title"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{children:"Slug"}),(0,s.jsx)(d.p,{value:r.slug,onChange:s=>{let a=[...e],i=a.findIndex(e=>e.id===r.id);a[i]={...r,slug:b(s.target.value)},t(a)},placeholder:"post-url-slug"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{children:"Excerpt"}),(0,s.jsx)(o.T,{value:r.excerpt,onChange:s=>{let a=[...e],i=a.findIndex(e=>e.id===r.id);a[i]={...r,excerpt:s.target.value},t(a)},placeholder:"Brief description of the post"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{children:"Content"}),(0,s.jsx)(o.T,{value:r.content,onChange:s=>{let a=[...e],i=a.findIndex(e=>e.id===r.id);a[i]={...r,content:s.target.value},t(a)},placeholder:"Post content (Markdown supported)",className:"min-h-[200px]"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.Label,{children:"Featured Image"}),(0,s.jsx)(d.p,{type:"file",accept:"image/*",onChange:e=>w(e,r)}),r.featured_image&&(0,s.jsxs)("div",{className:"relative w-40 h-40",children:[(0,s.jsx)("img",{src:r.featured_image,alt:r.title,className:"w-full h-full object-cover rounded-md"}),(0,s.jsx)(n.$,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>x({...r,featured_image:""}),children:"Remove"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.d,{checked:r.published,onCheckedChange:s=>{let a=[...e],i=a.findIndex(e=>e.id===r.id);a[i]={...r,published:s},t(a)}}),(0,s.jsx)(u.Label,{children:"Published"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.d,{checked:r.featured,onCheckedChange:s=>{let a=[...e],i=a.findIndex(e=>e.id===r.id);a[i]={...r,featured:s},t(a)}}),(0,s.jsx)(u.Label,{children:"Featured"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(n.$,{variant:"destructive",onClick:()=>v(r.id),children:"Delete"}),(0,s.jsx)(n.$,{onClick:()=>x(r),disabled:p,children:"Save Changes"})]})]})]},r.id))})]})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var s=r(5155),a=r(2115),i=r(2317),l=r(1027),n=r(1567);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:o=!1,...c}=e,u=o?i.DX:"button";return(0,s.jsx)(u,{className:(0,n.cn)(d({variant:a,size:l,className:r})),ref:t,...c})});o.displayName="Button"},9749:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>n});var s=r(5155),a=r(2115),i=r(1567);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});l.displayName="Card";let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});n.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},3900:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var s=r(5155),a=r(2115),i=r(1567);let l=a.forwardRef((e,t)=>{let{className:r,type:a,...l}=e;return(0,s.jsx)("input",{type:a,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},8986:(e,t,r)=>{"use strict";r.d(t,{Label:()=>o});var s=r(5155),a=r(2115),i=r(6195),l=r(1027),n=r(1567);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,n.cn)(d(),r),...a})});o.displayName=i.b.displayName},488:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var s=r(5155),a=r(2115),i=r(2920),l=r(1567);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.bL,{className:(0,l.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:t,children:(0,s.jsx)(i.zi,{className:(0,l.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});n.displayName=i.bL.displayName},6754:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var s=r(5155),a=r(2115),i=r(1567);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});l.displayName="Textarea"},1086:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var s=r(5974);let a=null,i=()=>a||(a=(0,s.UU)("https://jjilijsqunjqmyrzlkhs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpqaWxpanNxdW5qcW15cnpsa2hzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ0OTEzNjYsImV4cCI6MjA1MDA2NzM2Nn0.7Wbc_Ok819Kzb68hHXVS9BrZ7UIeKIzzdcpRp_pIXp8",{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"sb-auth-token",storage:{getItem:e=>window.localStorage.getItem(e),setItem:(e,t)=>{window.localStorage.setItem(e,t)},removeItem:e=>{window.localStorage.removeItem(e)}}}}))},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(3463),a=r(9795);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},6195:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});var s=r(2115),a=r(3360),i=r(5155),l=s.forwardRef((e,t)=>(0,i.jsx)(a.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var n=l}},e=>{var t=t=>e(e.s=t);e.O(0,[736,181,184,441,517,358],()=>t(9611)),_N_E=e.O()}]);